{"version":3,"sources":["app/integration/login_auth_view_test.cljs"],"mappings":"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","names":["app.integration.login-auth-view-test/cljs-test-each-fixtures","app.integration.aux/before-fn","app.integration.aux/after-fn","refx.alpha.reg_event_db","p__33326","vec__33327","cljs.core.nth","db","_","current-route","cljs.core.assoc","refx.alpha/reg-fx","refx.alpha.reg_event_fx","p__33330","vec__33331","p__33334","vec__33335","app.integration.login-auth-view-test/login-auth-fail-msw","app.integration.login-auth-view-test/login-return","app.integration.login-auth-view-test/login-auth-sucess-msw","cljs.core/clj->js","cljs.test/test-var","app.integration.login-auth-view-test/login-auth-view-test-fail-workos-test","cljs.test.update_current_env_BANG_","cljs.core/conj","cljs.test/update-current-env!","cljs.core/rest","js/app","js/app.integration","js/app.integration.login-auth-view-test","js/app.integration.login-auth-view-test.t_app$integration$login_auth_view_test33342","app.integration.login-auth-view-test/t_app$integration$login_auth_view_test33342","_33344","meta33343","cljs.core/PROTOCOL_SENTINEL","unused__11778__auto__","self__","G__33347","js/Error","args33346","cljs.core/aclone","___11437__auto__","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","app.integration.login-auth-view-test/->t_app$integration$login_auth_view_test33342","done","promesa.protocols/-bind","promesa.protocols/-promise","___28044__auto__","___28029__auto__","___28028__auto__","_route","refx.alpha/dispatch","_msw","dev.msw.core.start_BANG_","_render","app.aux.wait_for","app.auth.views/login-auth-view","app.aux/render","error-msg","promesa.core.delay","refx.subs/sub","values__11355__auto__","cljs.core/List","result__11356__auto__","cljs.core.apply","cljs.test/report","cljs.core/cons","t__11406__auto__","e33348","cljs.core/=","cljs.core/last","refx.subs/-value","app.aux.cleanup","app.integration.login-auth-view-test/login-auth-view-test-fail-api-test","js/app.integration.login-auth-view-test.t_app$integration$login_auth_view_test33350","app.integration.login-auth-view-test/t_app$integration$login_auth_view_test33350","_33352","meta33351","G__33359","args33356","app.integration.login-auth-view-test/->t_app$integration$login_auth_view_test33350","e33360","app.integration.login-auth-view-test/login-auth-view-test-success-api-test","js/app.integration.login-auth-view-test.t_app$integration$login_auth_view_test33362","app.integration.login-auth-view-test/t_app$integration$login_auth_view_test33362","_33364","meta33363","G__33366","args33365","app.integration.login-auth-view-test/->t_app$integration$login_auth_view_test33362","current-user","e33368"],"sourcesContent":["(ns app.integration.login-auth-view-test\n  (:require [app.auth.events]\n            [app.auth.subs]\n            [app.auth.views :as auth.views]\n            [app.aux :as aux]\n            [app.integration.aux :refer [after-fn before-fn]]\n            [app.routes.subs]\n            [cljs.test :refer [async deftest is testing use-fixtures]]\n            [dev.msw.core :as mock]\n            [promesa.core :as p]\n            [refx.alpha :as refx]\n            [refx.subs :as subs]))\n\n(use-fixtures :each\n  {:before before-fn\n   :after after-fn})\n\n;; events\n\n(refx/reg-event-db\n :app.routes/navigated-fake\n (fn [db [_ current-route]]\n   (assoc db :current-route current-route)))\n\n(refx/reg-fx :push-state (fn [_]))\n\n(refx/reg-event-fx :app.routes/push-state (fn [_ [_ _]]))\n\n(refx/reg-event-db :app.routes/navigated (fn [_ [_ _]]))\n\n;; http mocks\n\n(def login-auth-fail-msw\n  {\"/login/auth\"\n   {:post {:status 401\n           :content-type :json\n           :body #js {:message \"Invalid credentials\"}}}})\n\n(def login-return\n  {:profile {:email \"msw.mock@email.com\"\n             :name \"Msw Mock\"}\n   :token \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1za0BlbWFpbC5jb20ifQ._M8ecsfRagfoZhCxLiCSWr9j7JVRyrOKPf-VTKsinU8\"\n   :expires_in 1})\n\n(def login-auth-sucess-msw\n  {\"/login/auth\"\n   {:post {:status 201\n           :content-type :json\n           :body (clj->js login-return)}}})\n\n(deftest login-auth-view-test-fail-workos-test\n  (testing \"auth login code redirect view should show error from WORKOS\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params\n                                           {:error_description \"some err message.\"}}])\n                   _msw (mock/start! login-auth-fail-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   error-msg (p/delay 250 (subs/sub [:app.auth/login-error]))]\n             (is (= \"some err message.\" (last (subs/-value error-msg))))\n             (aux/cleanup)\n             (done)))))\n\n(deftest login-auth-view-test-fail-api-test\n  (testing \"auth login code redirect view should show error from internal API\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params {:code \"1234\"}}])\n                   _msw (mock/start! login-auth-fail-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   error-msg (p/delay 250 (subs/sub [:app.auth/login-error]))]\n             (is (= \"Invalid credentials\" (:message (last (subs/-value error-msg)))))\n             (aux/cleanup)\n             (done)))))\n\n(deftest login-auth-view-test-success-api-test\n  (testing \"auth login code redirect view should show error from internal API\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params {:code \"1234\"}}])\n                   _msw (mock/start! login-auth-sucess-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   current-user (p/delay 250 (subs/sub [:app.auth/current-user]))]\n             (is (= login-return (subs/-value current-user)))\n             (aux/cleanup)\n             (done)))))\n"]}