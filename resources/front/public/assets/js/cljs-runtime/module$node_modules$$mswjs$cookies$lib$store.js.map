{
"version":3,
"file":"module$node_modules$$mswjs$cookies$lib$store.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/@mswjs/cookies/lib/store.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$mswjs$cookies$lib$store\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.store = exports.PERSISTENCY_KEY = void 0;\nconst set_cookie_parser_1 = require(\"set-cookie-parser\");\nexports.PERSISTENCY_KEY = 'MSW_COOKIE_STORE';\nfunction supportsLocalStorage() {\n    try {\n        if (localStorage == null) {\n            return false;\n        }\n        const testKey = exports.PERSISTENCY_KEY + '_test';\n        localStorage.setItem(testKey, 'test');\n        localStorage.getItem(testKey);\n        localStorage.removeItem(testKey);\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\nclass CookieStore {\n    constructor() {\n        this.store = new Map();\n    }\n    /**\n     * Sets the given request cookies into the store.\n     * Respects the `request.credentials` policy.\n     */\n    add(request, response) {\n        if (request.credentials === 'omit') {\n            return;\n        }\n        const requestUrl = new URL(request.url);\n        const responseCookies = response.headers.get('set-cookie');\n        if (!responseCookies) {\n            return;\n        }\n        const now = Date.now();\n        const parsedResponseCookies = set_cookie_parser_1.parse(responseCookies).map((_a) => {\n            var { maxAge } = _a, cookie = __rest(_a, [\"maxAge\"]);\n            return (Object.assign(Object.assign({}, cookie), { expires: maxAge === undefined ? cookie.expires : new Date(now + maxAge * 1000), maxAge }));\n        });\n        const prevCookies = this.store.get(requestUrl.origin) || new Map();\n        parsedResponseCookies.forEach((cookie) => {\n            this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n        });\n    }\n    /**\n     * Returns cookies relevant to the given request\n     * and its `request.credentials` policy.\n     */\n    get(request) {\n        this.deleteExpiredCookies();\n        const requestUrl = new URL(request.url);\n        const originCookies = this.store.get(requestUrl.origin) || new Map();\n        switch (request.credentials) {\n            case 'include': {\n                // Support running this method in Node.js.\n                if (typeof document === 'undefined') {\n                    return originCookies;\n                }\n                const documentCookies = set_cookie_parser_1.parse(document.cookie);\n                documentCookies.forEach((cookie) => {\n                    originCookies.set(cookie.name, cookie);\n                });\n                return originCookies;\n            }\n            case 'same-origin': {\n                return originCookies;\n            }\n            default:\n                return new Map();\n        }\n    }\n    /**\n     * Returns a collection of all stored cookies.\n     */\n    getAll() {\n        this.deleteExpiredCookies();\n        return this.store;\n    }\n    /**\n     * Deletes all cookies associated with the given request.\n     */\n    deleteAll(request) {\n        const requestUrl = new URL(request.url);\n        this.store.delete(requestUrl.origin);\n    }\n    /**\n     * Clears the entire cookie store.\n     */\n    clear() {\n        this.store.clear();\n    }\n    /**\n     * Hydrates the virtual cookie store from the `localStorage` if defined.\n     */\n    hydrate() {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        const persistedCookies = localStorage.getItem(exports.PERSISTENCY_KEY);\n        if (!persistedCookies) {\n            return;\n        }\n        try {\n            const parsedCookies = JSON.parse(persistedCookies);\n            parsedCookies.forEach(([origin, cookies]) => {\n                this.store.set(origin, new Map(cookies.map((_a) => {\n                    var [token, _b] = _a, { expires } = _b, cookie = __rest(_b, [\"expires\"]);\n                    return [\n                        token,\n                        expires === undefined\n                            ? cookie\n                            : Object.assign(Object.assign({}, cookie), { expires: new Date(expires) }),\n                    ];\n                })));\n            });\n        }\n        catch (error) {\n            console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${exports.PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(exports.PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n            localStorage.removeItem(exports.PERSISTENCY_KEY);\n        }\n    }\n    /**\n     * Persists the current virtual cookies into the `localStorage` if defined,\n     * so they are available on the next page load.\n     */\n    persist() {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        const serializedCookies = Array.from(this.store.entries()).map(([origin, cookies]) => {\n            return [origin, Array.from(cookies.entries())];\n        });\n        localStorage.setItem(exports.PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n    }\n    deleteExpiredCookies() {\n        const now = Date.now();\n        this.store.forEach((originCookies, origin) => {\n            originCookies.forEach(({ expires, name }) => {\n                if (expires !== undefined && expires.getTime() <= now) {\n                    originCookies.delete(name);\n                }\n            });\n            if (originCookies.size === 0) {\n                this.store.delete(origin);\n            }\n        });\n    }\n}\nexports.store = new CookieStore();\n\n};"],
"names":["shadow$provide","global","require","module","exports","supportsLocalStorage","localStorage","testKey","PERSISTENCY_KEY","setItem","getItem","removeItem","error","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","defineProperty","value","store","set_cookie_parser_1","CookieStore","constructor","Map","add","request","response","credentials","requestUrl","URL","url","responseCookies","headers","get","now","Date","parsedResponseCookies","parse","map","_a","maxAge","cookie","assign","expires","undefined","prevCookies","origin","forEach","set","name","deleteExpiredCookies","originCookies","document","documentCookies","getAll","deleteAll","delete","clear","hydrate","persistedCookies","JSON","parsedCookies","cookies","token","_b","console","warn","persist","serializedCookies","Array","from","entries","stringify","getTime","size"]
}
