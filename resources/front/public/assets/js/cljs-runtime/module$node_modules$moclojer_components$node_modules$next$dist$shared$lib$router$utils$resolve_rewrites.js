shadow$provide.module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$resolve_rewrites=function(global,require,module,exports){var process=require("module$node_modules$process$browser");"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(asPath,pages,rewrites,query,resolveHref,locales){let matchedPage=!1,externalDest=!1,parsedAs=(0,_parseRelativeUrl).parseRelativeUrl(asPath),fsPathname=(0,_removeTrailingSlash).removeTrailingSlash((0,
_normalizeLocalePath).normalizeLocalePath((0,_removeBasePath).removeBasePath(parsedAs.pathname),locales).pathname),resolvedHref;const handleRewrite=rewrite=>{let params=(0,_pathMatch).getPathMatch(rewrite.source+(process.env.__NEXT_TRAILING_SLASH?"(/)?":""),{removeUnnamedParams:!0,strict:!0})(parsedAs.pathname);if(rewrite.has&&params){const hasParams=(0,_prepareDestination).matchHas({headers:{host:document.location.hostname},cookies:document.cookie.split("; ").reduce((acc,item)=>{const [key,...value]=
item.split("\x3d");acc[key]=value.join("\x3d");return acc},{})},rewrite.has,parsedAs.query);hasParams?Object.assign(params,hasParams):params=!1}if(params){if(!rewrite.destination)return externalDest=!0;rewrite=(0,_prepareDestination).prepareDestination({appendParamsToQuery:!0,destination:rewrite.destination,params,query});parsedAs=rewrite.parsedDestination;asPath=rewrite.newUrl;Object.assign(query,rewrite.parsedDestination.query);fsPathname=(0,_removeTrailingSlash).removeTrailingSlash((0,_normalizeLocalePath).normalizeLocalePath((0,
_removeBasePath).removeBasePath(asPath),locales).pathname);if(pages.includes(fsPathname))return matchedPage=!0,resolvedHref=fsPathname,!0;resolvedHref=resolveHref(fsPathname);if(resolvedHref!==asPath&&pages.includes(resolvedHref))return matchedPage=!0}};var finished=!1;for(var i=0;i<rewrites.beforeFiles.length;i++)handleRewrite(rewrites.beforeFiles[i]);matchedPage=pages.includes(fsPathname);if(!matchedPage){if(!finished)for(i=0;i<rewrites.afterFiles.length;i++)if(handleRewrite(rewrites.afterFiles[i])){finished=
!0;break}finished||(resolvedHref=resolveHref(fsPathname),finished=matchedPage=pages.includes(resolvedHref));if(!finished)for(finished=0;finished<rewrites.fallback.length;finished++)if(handleRewrite(rewrites.fallback[finished])){finished=!0;break}}return{asPath,parsedAs,matchedPage,resolvedHref,externalDest}};var _pathMatch=require("module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$path_match"),_prepareDestination=require("module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$prepare_destination"),
_removeTrailingSlash=require("module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$remove_trailing_slash"),_normalizeLocalePath=require("module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$i18n$normalize_locale_path"),_removeBasePath=require("module$node_modules$moclojer_components$node_modules$next$dist$client$remove_base_path"),_parseRelativeUrl=require("module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$parse_relative_url")}
//# sourceMappingURL=module$node_modules$moclojer_components$node_modules$next$dist$shared$lib$router$utils$resolve_rewrites.js.map
