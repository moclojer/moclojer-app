{
"version":3,
"file":"module$node_modules$graphql$validation$rules$KnownDirectivesRule.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/graphql/validation/rules/KnownDirectivesRule.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$graphql$validation$rules$KnownDirectivesRule\"] = function(global,require,module,exports) {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true,\n});\nexports.KnownDirectivesRule = KnownDirectivesRule;\n\nvar _inspect = require('../../jsutils/inspect.js');\n\nvar _invariant = require('../../jsutils/invariant.js');\n\nvar _GraphQLError = require('../../error/GraphQLError.js');\n\nvar _ast = require('../../language/ast.js');\n\nvar _directiveLocation = require('../../language/directiveLocation.js');\n\nvar _kinds = require('../../language/kinds.js');\n\nvar _directives = require('../../type/directives.js');\n\n/**\n * Known directives\n *\n * A GraphQL document is only valid if all `@directives` are known by the\n * schema and legally positioned.\n *\n * See https://spec.graphql.org/draft/#sec-Directives-Are-Defined\n */\nfunction KnownDirectivesRule(context) {\n  const locationsMap = Object.create(null);\n  const schema = context.getSchema();\n  const definedDirectives = schema\n    ? schema.getDirectives()\n    : _directives.specifiedDirectives;\n\n  for (const directive of definedDirectives) {\n    locationsMap[directive.name] = directive.locations;\n  }\n\n  const astDefinitions = context.getDocument().definitions;\n\n  for (const def of astDefinitions) {\n    if (def.kind === _kinds.Kind.DIRECTIVE_DEFINITION) {\n      locationsMap[def.name.value] = def.locations.map((name) => name.value);\n    }\n  }\n\n  return {\n    Directive(node, _key, _parent, _path, ancestors) {\n      const name = node.name.value;\n      const locations = locationsMap[name];\n\n      if (!locations) {\n        context.reportError(\n          new _GraphQLError.GraphQLError(`Unknown directive \"@${name}\".`, {\n            nodes: node,\n          }),\n        );\n        return;\n      }\n\n      const candidateLocation = getDirectiveLocationForASTPath(ancestors);\n\n      if (candidateLocation && !locations.includes(candidateLocation)) {\n        context.reportError(\n          new _GraphQLError.GraphQLError(\n            `Directive \"@${name}\" may not be used on ${candidateLocation}.`,\n            {\n              nodes: node,\n            },\n          ),\n        );\n      }\n    },\n  };\n}\n\nfunction getDirectiveLocationForASTPath(ancestors) {\n  const appliedTo = ancestors[ancestors.length - 1];\n  'kind' in appliedTo || (0, _invariant.invariant)(false);\n\n  switch (appliedTo.kind) {\n    case _kinds.Kind.OPERATION_DEFINITION:\n      return getDirectiveLocationForOperation(appliedTo.operation);\n\n    case _kinds.Kind.FIELD:\n      return _directiveLocation.DirectiveLocation.FIELD;\n\n    case _kinds.Kind.FRAGMENT_SPREAD:\n      return _directiveLocation.DirectiveLocation.FRAGMENT_SPREAD;\n\n    case _kinds.Kind.INLINE_FRAGMENT:\n      return _directiveLocation.DirectiveLocation.INLINE_FRAGMENT;\n\n    case _kinds.Kind.FRAGMENT_DEFINITION:\n      return _directiveLocation.DirectiveLocation.FRAGMENT_DEFINITION;\n\n    case _kinds.Kind.VARIABLE_DEFINITION:\n      return _directiveLocation.DirectiveLocation.VARIABLE_DEFINITION;\n\n    case _kinds.Kind.SCHEMA_DEFINITION:\n    case _kinds.Kind.SCHEMA_EXTENSION:\n      return _directiveLocation.DirectiveLocation.SCHEMA;\n\n    case _kinds.Kind.SCALAR_TYPE_DEFINITION:\n    case _kinds.Kind.SCALAR_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.SCALAR;\n\n    case _kinds.Kind.OBJECT_TYPE_DEFINITION:\n    case _kinds.Kind.OBJECT_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.OBJECT;\n\n    case _kinds.Kind.FIELD_DEFINITION:\n      return _directiveLocation.DirectiveLocation.FIELD_DEFINITION;\n\n    case _kinds.Kind.INTERFACE_TYPE_DEFINITION:\n    case _kinds.Kind.INTERFACE_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.INTERFACE;\n\n    case _kinds.Kind.UNION_TYPE_DEFINITION:\n    case _kinds.Kind.UNION_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.UNION;\n\n    case _kinds.Kind.ENUM_TYPE_DEFINITION:\n    case _kinds.Kind.ENUM_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.ENUM;\n\n    case _kinds.Kind.ENUM_VALUE_DEFINITION:\n      return _directiveLocation.DirectiveLocation.ENUM_VALUE;\n\n    case _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION:\n    case _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION:\n      return _directiveLocation.DirectiveLocation.INPUT_OBJECT;\n\n    case _kinds.Kind.INPUT_VALUE_DEFINITION: {\n      const parentNode = ancestors[ancestors.length - 3];\n      'kind' in parentNode || (0, _invariant.invariant)(false);\n      return parentNode.kind === _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION\n        ? _directiveLocation.DirectiveLocation.INPUT_FIELD_DEFINITION\n        : _directiveLocation.DirectiveLocation.ARGUMENT_DEFINITION;\n    }\n    // Not reachable, all possible types have been considered.\n\n    /* c8 ignore next */\n\n    default:\n      false ||\n        (0, _invariant.invariant)(\n          false,\n          'Unexpected kind: ' + (0, _inspect.inspect)(appliedTo.kind),\n        );\n  }\n}\n\nfunction getDirectiveLocationForOperation(operation) {\n  switch (operation) {\n    case _ast.OperationTypeNode.QUERY:\n      return _directiveLocation.DirectiveLocation.QUERY;\n\n    case _ast.OperationTypeNode.MUTATION:\n      return _directiveLocation.DirectiveLocation.MUTATION;\n\n    case _ast.OperationTypeNode.SUBSCRIPTION:\n      return _directiveLocation.DirectiveLocation.SUBSCRIPTION;\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","getDirectiveLocationForASTPath","ancestors","appliedTo","length","_invariant","invariant","kind","_kinds","Kind","OPERATION_DEFINITION","operation","_ast","OperationTypeNode","QUERY","_directiveLocation","DirectiveLocation","MUTATION","SUBSCRIPTION","FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT","FRAGMENT_DEFINITION","VARIABLE_DEFINITION","SCHEMA_DEFINITION","SCHEMA_EXTENSION","SCHEMA","SCALAR_TYPE_DEFINITION","SCALAR_TYPE_EXTENSION","SCALAR","OBJECT_TYPE_DEFINITION","OBJECT_TYPE_EXTENSION","OBJECT","FIELD_DEFINITION","INTERFACE_TYPE_DEFINITION","INTERFACE_TYPE_EXTENSION","INTERFACE","UNION_TYPE_DEFINITION","UNION_TYPE_EXTENSION","UNION","ENUM_TYPE_DEFINITION","ENUM_TYPE_EXTENSION","ENUM","ENUM_VALUE_DEFINITION","ENUM_VALUE","INPUT_OBJECT_TYPE_DEFINITION","INPUT_OBJECT_TYPE_EXTENSION","INPUT_OBJECT","INPUT_VALUE_DEFINITION","parentNode","INPUT_FIELD_DEFINITION","ARGUMENT_DEFINITION","_inspect","inspect","Object","defineProperty","value","KnownDirectivesRule","context","locationsMap","create","schema","getSchema","definedDirectives","getDirectives","_directives","specifiedDirectives","directive","name","locations","astDefinitions","getDocument","definitions","def","DIRECTIVE_DEFINITION","map","Directive","node","_key","_parent","_path","candidateLocation","includes","reportError","_GraphQLError","GraphQLError","nodes"]
}
