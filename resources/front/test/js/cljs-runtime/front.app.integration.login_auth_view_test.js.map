{"version":3,"sources":["front/app/integration/login_auth_view_test.cljs"],"mappings":"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","names":["front.app.integration.login-auth-view-test/cljs-test-each-fixtures","front.app.integration.aux/before-fn","front.app.integration.aux/after-fn","refx.alpha.reg_event_db","p__31442","vec__31443","cljs.core.nth","db","_","current-route","cljs.core.assoc","refx.alpha/reg-fx","refx.alpha.reg_event_fx","p__31446","vec__31447","p__31450","vec__31451","front.app.integration.login-auth-view-test/login-auth-fail-msw","front.app.integration.login-auth-view-test/login-return","front.app.integration.login-auth-view-test/login-auth-sucess-msw","cljs.core/clj->js","cljs.test/test-var","front.app.integration.login-auth-view-test/login-auth-view-test-fail-workos-test","cljs.test.update_current_env_BANG_","cljs.core/conj","cljs.test/update-current-env!","cljs.core/rest","js/front","js/front.app","js/front.app.integration","js/front.app.integration.login-auth-view-test","js/front.app.integration.login-auth-view-test.t_front$app$integration$login_auth_view_test31457","front.app.integration.login-auth-view-test/t_front$app$integration$login_auth_view_test31457","_31459","meta31458","cljs.core/PROTOCOL_SENTINEL","unused__11783__auto__","self__","G__31463","js/Error","args31460","cljs.core/aclone","___11442__auto__","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","front.app.integration.login-auth-view-test/->t_front$app$integration$login_auth_view_test31457","done","promesa.protocols/-bind","promesa.protocols/-promise","___29344__auto__","___29329__auto__","___29328__auto__","_route","refx.alpha/dispatch","_msw","dev.msw.core.start_BANG_","_render","front.app.aux.wait_for","front.app.auth.views/login-auth-view","front.app.aux/render","error-msg","promesa.core.delay","refx.subs/sub","values__11360__auto__","cljs.core/List","result__11361__auto__","cljs.core.apply","cljs.test/report","cljs.core/cons","t__11411__auto__","e31464","cljs.core/=","cljs.core/last","refx.subs/-value","front.app.aux.cleanup","front.app.integration.login-auth-view-test/login-auth-view-test-fail-api-test","js/front.app.integration.login-auth-view-test.t_front$app$integration$login_auth_view_test31466","front.app.integration.login-auth-view-test/t_front$app$integration$login_auth_view_test31466","_31468","meta31467","G__31474","args31472","front.app.integration.login-auth-view-test/->t_front$app$integration$login_auth_view_test31466","e31476","front.app.integration.login-auth-view-test/login-auth-view-test-success-api-test","js/front.app.integration.login-auth-view-test.t_front$app$integration$login_auth_view_test31478","front.app.integration.login-auth-view-test/t_front$app$integration$login_auth_view_test31478","_31480","meta31479","G__31482","args31481","front.app.integration.login-auth-view-test/->t_front$app$integration$login_auth_view_test31478","current-user","e31484"],"sourcesContent":["(ns front.app.integration.login-auth-view-test\n  (:require [front.app.auth.events]\n            [front.app.auth.subs]\n            [front.app.auth.views :as auth.views]\n            [front.app.aux :as aux]\n            [front.app.integration.aux :refer [after-fn before-fn]]\n            [front.app.routes.subs]\n            [cljs.test :refer [async deftest is testing use-fixtures]]\n            [dev.msw.core :as mock]\n            [promesa.core :as p]\n            [refx.alpha :as refx]\n            [refx.subs :as subs]))\n\n(use-fixtures :each\n  {:before before-fn\n   :after after-fn})\n\n;; events\n\n(refx/reg-event-db\n :app.routes/navigated-fake\n (fn [db [_ current-route]]\n   (assoc db :current-route current-route)))\n\n(refx/reg-fx :push-state (fn [_]))\n\n(refx/reg-event-fx :app.routes/push-state (fn [_ [_ _]]))\n\n(refx/reg-event-db :app.routes/navigated (fn [_ [_ _]]))\n\n;; http mocks\n\n(def login-auth-fail-msw\n  {\"/login/auth\"\n   {:post {:status 401\n           :content-type :json\n           :body #js {:message \"Invalid credentials\"}}}})\n\n(def login-return\n  {:profile {:email \"msw.mock@email.com\"\n             :name \"Msw Mock\"}\n   :token \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6Im1za0BlbWFpbC5jb20ifQ._M8ecsfRagfoZhCxLiCSWr9j7JVRyrOKPf-VTKsinU8\"\n   :expires_in 1})\n\n(def login-auth-sucess-msw\n  {\"/login/auth\"\n   {:post {:status 201\n           :content-type :json\n           :body (clj->js login-return)}}})\n\n(deftest login-auth-view-test-fail-workos-test\n  (testing \"auth login code redirect view should show error from WORKOS\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params\n                                           {:error_description \"some err message.\"}}])\n                   _msw (mock/start! login-auth-fail-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   error-msg (p/delay 250 (subs/sub [:app.auth/login-error]))]\n             (is (= \"some err message.\" (last (subs/-value error-msg))))\n             (aux/cleanup)\n             (done)))))\n\n(deftest login-auth-view-test-fail-api-test\n  (testing \"auth login code redirect view should show error from internal API\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params {:code \"1234\"}}])\n                   _msw (mock/start! login-auth-fail-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   error-msg (p/delay 250 (subs/sub [:app.auth/login-error]))]\n             (is (= \"Invalid credentials\" (:message (last (subs/-value error-msg)))))\n             (aux/cleanup)\n             (done)))))\n\n(deftest login-auth-view-test-success-api-test\n  (testing \"auth login code redirect view should show error from internal API\"\n    (async done\n           (p/let [_route (refx/dispatch [:app.routes/navigated-fake\n                                          {:query-params {:code \"1234\"}}])\n                   _msw (mock/start! login-auth-sucess-msw)\n                   _render (aux/wait-for #(-> auth.views/login-auth-view aux/render .-container))\n                   current-user (p/delay 250 (subs/sub [:app.auth/current-user]))]\n             (is (= login-return (subs/-value current-user)))\n             (aux/cleanup)\n             (done)))))\n"]}