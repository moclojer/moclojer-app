{
"version":3,
"file":"module$node_modules$$supabase$realtime_js$dist$main$lib$push.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@supabase/realtime-js/dist/main/lib/push.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$supabase$realtime_js$dist$main$lib$push\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst constants_1 = require(\"../lib/constants\");\nclass Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = constants_1.DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\nexports.default = Push;\n//# sourceMappingURL=push.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","constants_1","Push","constructor","channel","event","payload","timeout","DEFAULT_TIMEOUT","sent","timeoutTimer","undefined","ref","receivedResp","recHooks","refEvent","rateLimited","resend","_cancelRefEvent","send","_hasReceived","startTimeout","socket","push","status","topic","join_ref","_joinRef","updatePayload","assign","receive","callback","_a","response","_makeRef","_replyEventName","_on","_cancelTimeout","_matchReceive","setTimeout","trigger","_trigger","destroy","_off","clearTimeout","filter","h","forEach","default"]
}
